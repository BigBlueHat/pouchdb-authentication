!function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var d=r[i]={exports:{}};t[i][0].call(d.exports,function(e){var r=t[i][1][e];return o(r?r:e)},d,d.exports,e,t,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t){"use strict";function r(e,t){function r(t,r,n){if(e.binary||e.json||!e.processData||"string"==typeof t){if(!e.binary&&e.json&&"string"==typeof t)try{t=JSON.parse(t)}catch(o){return n(o)}}else t=JSON.stringify(t);Array.isArray(t)&&(t=t.map(function(e){var t;return e.ok?e:e.error&&"conflict"===e.error?(t=s.REV_CONFLICT,t.id=e.id,t):e.error&&"forbidden"===e.error?(t=s.FORBIDDEN,t.id=e.id,t.reason=e.reason,t):e.missing?(t=s.MISSING_DOC,t.missing=e.missing,t):e})),n(null,t,r)}function a(e,t){var r,n,o,i;try{r=JSON.parse(e.responseText);for(i in s)if(s.hasOwnProperty(i)&&s[i].name===r.error){o=s[i];break}o||(o=s.UNKNOWN_ERROR,e.status&&(o.status=e.status),e.statusText&&(e.name=e.statusText)),n=s.error(o,r.reason)}catch(a){for(var i in s)if(s.hasOwnProperty(i)&&s[i].status===e.status){o=s[i];break}o||(o=s.UNKNOWN_ERROR,e.status&&(o.status=e.status),e.statusText&&(e.name=e.statusText)),n=s.error(o)}t(n)}var u=!1,d=i.getArguments(function(e){u||(t.apply(this,e),u=!0)});"function"==typeof e&&(d=e,e={}),e=i.clone(e);var c={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};if(e=i.extend(!0,c,e),"GET"===e.method&&!e.cache){var f=-1!==e.url.indexOf("?");e.url+=(f?"&":"?")+"_nonce="+i.uuid(16)}var p,l;l=e.xhr?new e.xhr:new XMLHttpRequest,l.open(e.method,e.url),l.withCredentials=!0,e.json&&(e.headers.Accept="application/json",e.headers["Content-Type"]=e.headers["Content-Type"]||"application/json",e.body&&e.processData&&"string"!=typeof e.body&&(e.body=JSON.stringify(e.body))),e.binary&&(l.responseType="arraybuffer");var w=function(e,t,r){var n="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),n="; expires="+o.toGMTString()}document.cookie=e+"="+t+n+"; path=/"};for(var h in e.headers)if("Cookie"===h){var m=e.headers[h].split("=");w(m[0],m[1],10)}else l.setRequestHeader(h,e.headers[h]);"body"in e||(e.body=null);var y=function(){u||(l.abort(),a(l,d))};if(l.onreadystatechange=function(){if(4===l.readyState&&!u)if(clearTimeout(p),l.status>=200&&l.status<300){var t;t=e.binary?o([l.response||""],{type:l.getResponseHeader("Content-Type")}):l.responseText,r(t,l,d)}else a(l,d)},e.timeout>0&&(p=setTimeout(y,e.timeout),l.onprogress=function(){clearTimeout(p),p=setTimeout(y,e.timeout)},"undefined"==typeof n&&(n=-1!==Object.keys(l).indexOf("upload")),n&&(l.upload.onprogress=l.onprogress)),e.body&&e.body instanceof Blob){var g=new FileReader;g.onloadend=function(){for(var e="",t=new Uint8Array(this.result),r=t.byteLength,n=0;r>n;n++)e+=String.fromCharCode(t[n]);e=i.fixBinary(e),l.send(e)},g.readAsArrayBuffer(e.body)}else l.send(e.body);return{abort:y}}var n,o=e("./blob.js"),s=e("./errors"),i=e("./utils");t.exports=r},{"./blob.js":2,"./errors":3,"./utils":9}],2:[function(e,t){(function(e){"use strict";function r(t,r){t=t||[],r=r||{};try{return new Blob(t,r)}catch(n){if("TypeError"!==n.name)throw n;for(var o=e.BlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,s=new o,i=0;i<t.length;i+=1)s.append(t[i]);return s.getBlob(r.type)}}t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,r){"use strict";function n(e){this.status=e.status,this.name=e.error,this.message=e.reason,this.error=!0}n.prototype__proto__=Error.prototype,n.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},r.UNAUTHORIZED=new n({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),r.MISSING_BULK_DOCS=new n({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),r.MISSING_DOC=new n({status:404,error:"not_found",reason:"missing"}),r.REV_CONFLICT=new n({status:409,error:"conflict",reason:"Document update conflict"}),r.INVALID_ID=new n({status:400,error:"invalid_id",reason:"_id field must contain a string"}),r.MISSING_ID=new n({status:412,error:"missing_id",reason:"_id is required for puts"}),r.RESERVED_ID=new n({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),r.NOT_OPEN=new n({status:412,error:"precondition_failed",reason:"Database not open"}),r.UNKNOWN_ERROR=new n({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),r.BAD_ARG=new n({status:500,error:"badarg",reason:"Some query argument is invalid"}),r.INVALID_REQUEST=new n({status:400,error:"invalid_request",reason:"Request was invalid"}),r.QUERY_PARSE_ERROR=new n({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),r.DOC_VALIDATION=new n({status:500,error:"doc_validation",reason:"Bad special document member"}),r.BAD_REQUEST=new n({status:400,error:"bad_request",reason:"Something wrong with the request"}),r.NOT_AN_OBJECT=new n({status:400,error:"bad_request",reason:"Document must be a JSON object"}),r.DB_MISSING=new n({status:404,error:"not_found",reason:"Database not found"}),r.IDB_ERROR=new n({status:500,error:"indexed_db_went_bad",reason:"unknown"}),r.WSQ_ERROR=new n({status:500,error:"web_sql_went_bad",reason:"unknown"}),r.LDB_ERROR=new n({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),r.FORBIDDEN=new n({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),r.error=function(e,t,r){function n(){this.message=t,r&&(this.name=r)}return n.prototype=e,new n(t)}},{}],4:[function(e,t,r){"use strict";function n(e){return function(t,r){return t&&"unknown_error"===t.name&&(t.message=(t.message||"")+" Unknown error!  Did you remember to enable CORS?"),e(t,r)}}function o(e){this.status=400,this.name="authentication_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,o)}catch(t){}}var s=e("./utils");r.signup=s.toPromise(function(e,t,r,i){var a=this;if("undefined"==typeof i&&(i="undefined"==typeof r?"undefined"==typeof t?e:t:r,r={}),-1===["http","https"].indexOf(a.type()))return i(new o('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.'));if(!e)return i(new o("You must provide a username"));if(!t)return i(new o("You must provide a password"));var u="org.couchdb.user:"+e,d={name:e,password:t,roles:r.roles||[],type:"user",_id:u},c=["name","password","roles","type"];if(r.metadata){for(var f in r.metadata)if(r.hasOwnProperty(f)&&(-1!==c.indexOf(f)||f.startsWith("_")))return i(new o('cannot use reserved word in metadata: "'+f+'"'));d=s.extend(!0,d,r.metadata)}var p=s.getUsersUrl(a)+"/"+encodeURIComponent(u),l=s.extend(!0,{method:"PUT",url:p,body:d},r.ajax||{});s.ajax(l,n(i))}),r.signUp=r.signup,r.login=s.toPromise(function(e,t,r,i){var a=this;if("undefined"==typeof i&&(i=r,r={}),-1===["http","https"].indexOf(a.type()))return i(new o("this plugin only works for the http/https adapter"));if(!e)return i(new o("you must provide a username"));if(!t)return i(new o("you must provide a password"));var u=s.extend(!0,{method:"POST",url:s.getSessionUrl(a),body:{name:e,password:t}},r.ajax||{});s.ajax(u,n(i))}),r.logIn=r.login,r.logout=s.toPromise(function(e,t){var r=this;"undefined"==typeof t&&(t=e,e={});var o=s.extend(!0,{method:"DELETE",url:s.getSessionUrl(r)},e.ajax||{});s.ajax(o,n(t))}),r.logOut=r.logout,r.getSession=s.toPromise(function(e,t){var r=this;"undefined"==typeof t&&(t=e,e={});var o=s.getSessionUrl(r),i=s.extend(!0,{method:"GET",url:o},e.ajax||{});s.ajax(i,n(t))}),r.getUser=s.toPromise(function(e,t,r){var i=this;if("undefined"==typeof r&&(r="undefined"==typeof t?e:t,t={}),!e)return r(new o("you must provide a username"));var a=s.getUsersUrl(i),u=s.extend(!0,{method:"GET",url:a+"/"+encodeURIComponent("org.couchdb.user:"+e)},t.ajax||{});s.ajax(u,n(r))}),s.inherits(o,Error),"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(r)},{"./utils":9}],5:[function(){},{}],6:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.once=r,n.off=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],7:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],8:[function(e,t){"use strict";function r(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?a[f.call(e)]||"object":typeof e}function n(e){return null!==e&&e===e.window}function o(e){if(!e||"object"!==r(e)||e.nodeType||n(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var o;for(o in e);return void 0===o||p.call(e,o)}function s(e){return"function"===r(e)}function i(){var e,t,r,n,a,u,d=arguments[0]||{},c=1,f=arguments.length,p=!1;for("boolean"==typeof d&&(p=d,d=arguments[1]||{},c=2),"object"==typeof d||s(d)||(d={}),f===c&&(d=this,--c);f>c;c++)if(null!=(e=arguments[c]))for(t in e)if(!(t in Object.prototype)){if(r=d[t],n=e[t],d===n)continue;p&&n&&(o(n)||(a=l(n)))?(a?(a=!1,u=r&&l(r)?r:[]):u=r&&o(r)?r:{},d[t]=i(p,u,n)):void 0!==n&&(l(e)&&s(n)||(d[t]=n))}return d}for(var a={},u=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],d=0;d<u.length;d++){var c=u[d];a["[object "+c+"]"]=c.toLowerCase()}var f=a.toString,p=a.hasOwnProperty,l=Array.isArray||function(e){return"array"===r(e)};t.exports=i},{}],9:[function(e,t,r){(function(t,n){"use strict";function o(e){return e.getUrl().replace(/\/[^\/]+\/?$/,"")}var s;s="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof n.Promise?n.Promise:e("lie"),r.getUsersUrl=function(e){return o(e)+"/_users"},r.getSessionUrl=function(e){return o(e)+"/_session"},r.once=function(e){var t=!1;return r.getArguments(function(r){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,r)})},r.getArguments=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}},r.toPromise=function(e){return r.getArguments(function(n){var o,i=this,a="function"==typeof n[n.length-1]?n.pop():!1;a&&(o=function(e,r){t.nextTick(function(){a(e,r)})});var u=new s(function(t,o){try{var s=r.once(function(e,r){e?o(e):t(r)});n.push(s),e.apply(i,n)}catch(a){o(a)}});return o&&u.then(function(e){o(null,e)},o),u.cancel=function(){return this},u})},r.inherits=e("inherits"),r.extend=e("pouchdb-extend"),r.ajax=e("./ajax"),r.clone=function(e){return r.extend(!0,{},e)},r.uuid=e("./uuid"),r.Promise=s}).call(this,e("/Users/nolanlawson/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":1,"./uuid":10,"/Users/nolanlawson/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6,inherits:7,lie:5,"pouchdb-extend":8}],10:[function(e,t){"use strict";function r(e){return 0|Math.random()*e}function n(e,t){t=t||o.length;var n="",s=-1;if(e){for(;++s<e;)n+=o[r(t)];return n}for(;++s<36;)switch(s){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=o[3&r(16)|8];break;default:n+=o[r(16)]}return n}var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");t.exports=n},{}]},{},[4]);