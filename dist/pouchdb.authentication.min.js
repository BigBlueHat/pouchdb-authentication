!function e(t,n,o){function r(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";function o(e){return function(t,n){return t&&"unknown_error"===t.name&&(t.message=(t.message||"")+" Unknown error!  Did you remember to enable CORS?"),e(t,n)}}function r(e){this.status=400,this.name="authentication_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,r)}catch(t){}}var i=e("./utils");n.signup=i.toPromise(function(e,t,n,s){var u=this,a=u.constructor,c=a.utils;if("undefined"==typeof s&&(s="undefined"==typeof n?"undefined"==typeof t?e:t:n,n={}),-1===["http","https"].indexOf(u.type()))return s(new r('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.'));if(!e)return s(new r("You must provide a username"));if(!t)return s(new r("You must provide a password"));var d="org.couchdb.user:"+e,f={name:e,password:t,roles:n.roles||[],type:"user",_id:d},p=["name","password","roles","type"];if(n.metadata){for(var l in n.metadata)if(n.hasOwnProperty(l)&&(-1!==p.indexOf(l)||l.startsWith("_")))return s(new r('cannot use reserved word in metadata: "'+l+'"'));f=c.extend(!0,f,n.metadata)}var w=i.getUsersUrl(u)+"/"+encodeURIComponent(d),h=c.extend(!0,{method:"PUT",url:w,body:f},n.ajax||{});c.ajax(h,o(s))}),n.signUp=n.signup,n.login=i.toPromise(function(e,t,n,s){var u=this,a=u.constructor,c=a.utils;if("undefined"==typeof s&&(s=n,n={}),-1===["http","https"].indexOf(u.type()))return s(new r("this plugin only works for the http/https adapter"));if(!e)return s(new r("you must provide a username"));if(!t)return s(new r("you must provide a password"));var d=c.extend(!0,{method:"POST",url:i.getSessionUrl(u),body:{name:e,password:t}},n.ajax||{});c.ajax(d,o(s))}),n.logIn=n.login,n.logout=i.toPromise(function(e,t){var n=this,r=n.constructor,s=r.utils;"undefined"==typeof t&&(t=e,e={});var u=s.extend(!0,{method:"DELETE",url:i.getSessionUrl(n)},e.ajax||{});s.ajax(u,o(t))}),n.logOut=n.logout,n.getSession=i.toPromise(function(e,t){var n=this,r=n.constructor,s=r.utils;"undefined"==typeof t&&(t=e,e={});var u=i.getSessionUrl(n),a=s.extend(!0,{method:"GET",url:u},e.ajax||{});s.ajax(a,o(t))}),n.getUser=i.toPromise(function(e,t,n){var s=this,u=s.constructor,a=u.utils;if("undefined"==typeof n&&(n="undefined"==typeof t?e:t,t={}),!e)return n(new r("you must provide a username"));var c=i.getUsersUrl(s),d=a.extend(!0,{method:"GET",url:c+"/"+encodeURIComponent("org.couchdb.user:"+e)},t.ajax||{});a.ajax(d,o(n))}),i.inherits(r,Error),"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{"./utils":5}],2:[function(){},{}],3:[function(e,t){function n(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=n,o.once=n,o.off=n,o.emit=n,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],5:[function(e,t,n){(function(t,o){"use strict";function r(e){return e.getUrl().replace(/\/[^\/]+\/?$/,"")}var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof o.Promise?o.Promise:e("lie"),n.getUsersUrl=function(e){return r(e)+"/_users"},n.getSessionUrl=function(e){return r(e)+"/_session"},n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.getArguments=function(e){return function(){for(var t=arguments.length,n=new Array(t),o=-1;++o<t;)n[o]=arguments[o];return e.call(this,n)}},n.toPromise=function(e){return n.getArguments(function(o){var r,s=this,u="function"==typeof o[o.length-1]?o.pop():!1;u&&(r=function(e,n){t.nextTick(function(){u(e,n)})});var a=new i(function(t,r){try{var i=n.once(function(e,n){e?r(e):t(n)});o.push(i),e.apply(s,o)}catch(u){r(u)}});return r&&a.then(function(e){r(null,e)},r),a.cancel=function(){return this},a})},n.inherits=e("inherits")}).call(this,e("/Users/nolan/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/nolan/workspace/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":3,inherits:4,lie:2}]},{},[1]);